<section class="container mt-5">
  <!-- Título -->
  <h3 class="fw-bold titulo-seccion text-center flex-grow-1">{{ 'afiliacion.empresasAsociadas' | transloco }}</h3>
  <div class="directory-header d-flex justify-content-between align-items-center mb-4">
    <div class="text-center mb-4">
      <h3><strong>{{ 'afiliacion.descripcionSocios' | transloco }}</strong></h3>
    </div>
  </div>

  <!-- Barra de búsqueda -->
  <input type="text" class="form-control search-bar ms-3" placeholder="{{ 'afiliacion.buscarSector' | transloco }}"
    [(ngModel)]="searchQuery" (input)="filterCompanies()">

  <!-- Grilla de empresas -->
  <div class="companies-grid">
    <div class="card" *ngFor="let company of visibleCompanies" style="width: 18rem;">
      <img [src]="company.logo" class="card-img-top" alt="{{ 'afiliacion.logoEmpresa' | transloco: { empresa: company.name } }}">
      <div class="card-body">
        <h5 class="card-title">{{ company.name }}</h5>
        <a href="#" class="btn btn-primary-banner" (click)="sendEmail(company.contact)">{{ 'afiliacion.contactar' | transloco }}</a>
        <a href="#" class="btn btn-secondary" (click)="goToCompanyWebsite(company.website)">{{ 'afiliacion.visitar' | transloco }}</a>
      </div>
    </div>
  </div>

  <!-- Botón "Ver todas las empresas" -->
  <div class="text-center mt-3">
    <button class="btn-primary-banner" (click)="toggleShowAll()">
      {{ showAllCompanies ? ('afiliacion.verMenos' | transloco) : ('afiliacion.verTodas' | transloco) }}
    </button>
  </div>
</section>

<!-- Beneficios de ser Socios -->
<section class="mb-8 mt-3">
  <h3 class="text-center mb-3 titulo-seccion">{{ 'afiliacion.beneficiosTitulo' | transloco }}</h3>
  <h4 class="directory-header d-flex justify-content-between align-items-center mb-4">
    {{ 'afiliacion.beneficiosDescripcion' | transloco }}
  </h4>
  
  <!-- Carrusel de Beneficios -->
  <div id="benefitsCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active" data-bs-interval="2000">
        <img src="assets/beneficio1.jpg" class="d-block w-100" alt="{{ 'afiliacion.beneficio1' | transloco }}">
      </div>
      <div class="carousel-item" data-bs-interval="2000">
        <img src="assets/beneficio2.JPG" class="d-block w-100" alt="{{ 'afiliacion.beneficio2' | transloco }}">
      </div>
      <div class="carousel-item" data-bs-interval="2000">
        <img src="assets/beneficio3.jpg" class="d-block w-100" alt="{{ 'afiliacion.beneficio3' | transloco }}">
      </div>
      <div class="carousel-item" data-bs-interval="2000">
        <img src="assets/beneficio4.JPG" class="d-block w-100" alt="{{ 'afiliacion.beneficio4' | transloco }}">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#benefitsCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#benefitsCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
    </button>
  </div>
</section>

<!-- Sección de mensaje antes del botón de WhatsApp -->
<div class="text-center mt-4 p-4 rounded shadow-sm">
  <h4 class="fw-bold text-primary">📢 {{ 'afiliacion.redSocios' | transloco }}</h4>
  <p class="text-muted">
    <strong>{{ 'afiliacion.mensajePosicionamiento' | transloco }}</strong>
  </p>
  <ul class="list-unstyled mt-3">
    <li class="mb-2">🏆 <strong>{{ 'afiliacion.uneteComunidad' | transloco }}</strong></li>
    <li class="mb-2">🔹 <strong>{{ 'afiliacion.expandeInfluencia' | transloco }}</strong></li>
    <li class="mb-2">🔹 <strong>{{ 'afiliacion.formaParteForo' | transloco }}</strong></li>
  </ul>
  <p class="fw-bold mt-3">💼 <strong>{{ 'afiliacion.listoParaNivel' | transloco }}</strong></p>
  <button class="btn btn-primary mb-3 px-4 py-2 fw-bold shadow" (click)="showForm = !showForm">
    {{ 'afiliacion.afiliate' | transloco }}
  </button>
  <p class="text-secondary">📩 <em>{{ 'afiliacion.contactanos' | transloco }}</em></p>
</div>


<!-- Sección de formulario de inscripción -->
<section *ngIf="showForm" class="content">
  <br>
  <div class="form-container">
    <h2>{{ 'afiliacion.formularioInscripcion' | transloco }}</h2>

    <form #inscriptionForm="ngForm" (ngSubmit)="submitForm()">

      <!-- Nombre Completo -->
      <label for="name" class="form-label">{{ 'afiliacion.nombreCompleto' | transloco }}</label>
      <input type="text" id="name" name="name" [(ngModel)]="name" required class="form-control">

      <!-- Correo Electrónico -->
      <label for="email" class="form-label">{{ 'afiliacion.correoElectronico' | transloco }}</label>
      <input type="email" id="email" name="email" [(ngModel)]="email" required class="form-control">

      <!-- Nombre de la Empresa -->
      <label for="company" class="form-label">{{ 'afiliacion.nombreEmpresa' | transloco }}</label>
      <input type="text" id="company" name="company" [(ngModel)]="company" required class="form-control">

      <!-- Número de Teléfono -->
      <label for="phone" class="form-label">{{ 'afiliacion.numeroTelefono' | transloco }}</label>
      <input type="text" id="phone" name="phone" [(ngModel)]="phone" required class="form-control">
      <br>
      <p>
        {{ 'afiliacion.adicionalCV' | transloco }}
      </p>
      <strong>{{ 'afiliacion.correoContacto' | transloco }}</strong><br>
      <span>{{ 'afiliacion.contactoCorreo1' | transloco }}</span><br>
      <span>{{ 'afiliacion.contactoCorreo2' | transloco }}</span>

      <!-- Botón de envío -->
      <button type="submit" class="btn btn-primary-banner w-100 py-2" [disabled]="!inscriptionForm.form.valid">
        {{ 'afiliacion.enviarInscripcion' | transloco }}
      </button> <br> <!-- Botón para cerrar el formulario -->
      <!-- Botón para cerrar el formulario -->
      <button (click)="closeForm()" class="btn-primary-banner">{{ 'afiliacion.cerrar' | transloco }}</button>
    </form>
  </div>
  <br>
</section>

<!-- Botón flotante de WhatsApp -->
<div class="whatsapp-button" (click)="openWhatsApp()">
  <img src="assets/icono.png" alt="WhatsApp">
</div>
